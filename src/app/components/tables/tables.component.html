<div class="simple-tables">
    <!-- Header with back button -->
    <div class="simple-header">
        <button (click)="goBack()" class="simple-back-btn">
            ← Trở về
        </button>
        @if (area()) {
        <div class="header-info">
            <h1>{{ area()?.areaName }}</h1>
            <p>{{ area()?.description }}</p>
        </div>
        }
    </div>

    <!-- Loading State -->
    @if (loading()) {
    <div class="simple-loading">
        <div class="simple-spinner"></div>
        <p>Đang tải bàn...</p>
    </div>
    }

    <!-- Error State -->
    @if (error()) {
    <div class="simple-error">
        {{ error() }}
    </div>
    }

    <!-- Tables Grid -->
    @if (tables$().length > 0) {
    <div class="simple-tables-grid">
        @for (table of tables$(); track table.tableCode) {
        <div class="simple-table-card" [class]="getTableCardClass(table.status)">
            <div class="table-header">
                <h3>{{ table.tableName }}</h3>
                <span class="table-status" [class]="getStatusBadgeClass(table.status)">
                    {{getStatusText(table.status)}}
                </span>
            </div>

            <div class="table-info">
                <div class="info-item">
                    <span>Sức chứa: {{ table.capacity }} người</span>
                </div>
                <div class="info-item">
                    <span>Vị trí: {{ table.tableName }}</span>
                </div>
                <div class="info-item">
                    <span class="table-active-status" [class]="getTableStatusClass(table.isActive)">
                        {{ table.isActive ? 'Hoạt động' : 'Không hoạt động' }}
                    </span>
                </div>
            </div>

            <div class="table-actions">
                <!-- Nếu bàn đang trống/available thì hiện nút Đặt bàn -->
                @if (canBookTable(table.status)) {
                <button class="simple-btn book-btn" (click)="confirmBooking(table)">
                    Đặt bàn
                </button>
                }

                <!-- Nếu bàn đã có khách thì hiện nút Vào order -->
                @if (canViewDetails(table.status)) {
                <button class="simple-btn order-btn" (click)="goToOrderDashboard(table)">
                    Vào order
                </button>
                }
            </div>
        </div>
        }
    </div>
    }

    <!-- Empty State -->
    @if (tables$().length === 0 && !loading()) {
    <div class="simple-empty">
        <h3>Không tìm thấy bàn</h3>
        <p>Khu vực này chưa có bàn nào được cấu hình.</p>
    </div>
    }

    <!-- Confirm Modal -->
    @if (showConfirmModal()) {
    <div class="simple-modal-overlay" (click)="closeModal()">
        <div class="simple-modal" (click)="$event.stopPropagation()">
            <h3>Xác nhận mở bàn</h3>
            <p>
                Bạn có chắc muốn mở bàn
                "<strong>{{ selectedTable()?.tableName }}</strong>" không?
            </p>
            <div class="modal-actions">
                <button (click)="closeModal()" class="simple-btn cancel-btn">
                    Hủy
                </button>
                <button (click)="confirmBookingAction()" class="simple-btn confirm-btn">
                    Xác nhận
                </button>
            </div>
        </div>
    </div>
    }
</div>