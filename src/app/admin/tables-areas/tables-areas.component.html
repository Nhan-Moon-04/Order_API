<div class="simple-container">
    <div class="simple-header">
        <button (click)="goBack()" class="simple-back-btn">
            ← Quay lại
        </button>
        <h1>Quản lý Bàn Theo Khu Vực</h1>
        <p>Chọn khu vực để quản lý và sắp xếp bàn</p>
    </div>

    <!-- Main Content Layout -->
    <div class="simple-layout">
        <!-- Left Panel - Areas List -->
        <div class="simple-areas-panel">
            <h2>Danh sách khu vực</h2>

            <!-- Loading State for Areas -->
            @if (loading()) {
            <div class="simple-loading">
                <div class="simple-spinner"></div>
                <p>Đang tải...</p>
            </div>
            }

            <!-- Error State for Areas -->
            @if (error()) {
            <div class="simple-error">
                {{ error() }}
            </div>
            }

            <!-- Areas List -->
            @if (areas().length > 0) {
            <div class="simple-areas-list">
                @for (area of areas(); track area.areaId) {
                <div class="simple-area-item" [class.selected]="selectedArea()?.areaId === area.areaId"
                    (click)="selectArea(area)">
                    <div class="area-content">
                        <h3>{{ area.areaName }}</h3>
                        <span class="area-status" [class]="area.isActive ? 'active' : 'inactive'">
                            {{ area.isActive ? 'Hoạt động' : 'Không hoạt động' }}
                        </span>
                    </div>
                </div>
                }
            </div>
            }

            <!-- Empty State for Areas -->
            @if (areas().length === 0 && !loading()) {
            <div class="simple-empty">
                <p>Chưa có khu vực nào</p>
            </div>
            }
        </div>

        <!-- Right Panel - Tables -->
        <div class="simple-tables-panel">
            @if (!selectedArea()) {
            <!-- No Area Selected -->
            <div class="simple-no-selection">
                <h3>Chọn khu vực để xem bàn</h3>
                <p>Vui lòng chọn một khu vực từ danh sách bên trái</p>
            </div>
            } @else {
            <!-- Selected Area Header -->
            <div class="simple-area-header">
                <h2>Bàn trong {{ selectedArea()?.areaName }}</h2>
                <p>Quản lý và sắp xếp thứ tự bàn cho khu vực này</p>
            </div>

            <!-- Tables Grid -->
            @if (getTablesForArea(selectedArea()!.areaId).length > 0) {
            <div class="simple-tables-grid">
                @for (table of getTablesForArea(selectedArea()!.areaId); track table.tableId) {
                <div class="simple-table-card" [class.highlighted]="highlightedTable() === table.tableCode">
                    <div class="table-header">
                        <h4>{{ table.tableName }}</h4>
                        <span class="table-status" [class]="table.status === 1 ? 'available' : 'occupied'">
                            {{ table.status === 1 ? 'Trống' : 'Có khách' }}
                        </span>
                    </div>
                    <div class="table-info">
                        <p>Sức chứa: {{ table.capacity }} người</p>
                        <p>Thứ tự: #{{ table.sortOrder || 0 }}</p>
                    </div>
                    <div class="table-actions">
                        <button class="simple-btn" (click)="moveTableUp(table)" [disabled]="loading()">
                            ↑ Lên
                        </button>
                        <button class="simple-btn" (click)="moveTableDown(table)" [disabled]="loading()">
                            ↓ Xuống
                        </button>
                    </div>
                </div>
                }
            </div>
            }

            <!-- Empty State for Tables -->
            @if (getTablesForArea(selectedArea()!.areaId).length === 0) {
            <div class="simple-empty">
                <h3>Chưa có bàn nào</h3>
                <p>Khu vực này chưa có bàn được cấu hình.</p>
            </div>
            }
            }
        </div>
    </div>
</div>