<div class="simple-container">
    <div class="simple-header">
        <button (click)="goBack()" class="simple-back-btn">
            ← Quay lại
        </button>
        <div class="header-content">
            <h1>Quản lý Khu vực</h1>
            <p>Thêm, sửa, xóa các khu vực trong nhà hàng</p>
        </div>
        <button (click)="openAddModal()" class="simple-add-btn">
            + Thêm khu vực
        </button>
    </div>

    <!-- Main Content -->
    <div class="simple-content">
        <!-- Loading State -->
        @if (loading()) {
        <div class="simple-loading">
            <div class="simple-spinner"></div>
            <p>Đang tải...</p>
        </div>
        }

        <!-- Error State -->
        @if (error()) {
        <div class="simple-error">
            {{ error() }}
        </div>
        }

        <!-- Areas Grid -->
        @if (areas().length > 0 && !loading()) {
        <div class="simple-areas-grid">
            @for (area of areas(); track area.areaId) {
            <div class="simple-area-card">
                <div class="area-header">
                    <h4>{{ area.areaName }}</h4>
                    <div class="area-toggle">
                        <label class="simple-toggle">
                            <input type="checkbox" [checked]="area.isActive"
                                (change)="updateActive(area.areaId, !area.isActive)" [disabled]="loading()">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="area-status" [class]="area.isActive ? 'active' : 'inactive'">
                            {{ area.isActive ? 'Hoạt động' : 'Không hoạt động' }}
                        </span>
                    </div>
                </div>
                <div class="area-info">
                    <div class="area-description">
                        <p>{{ area.description || 'Không có mô tả' }}</p>
                    </div>
                    <div class="area-date">
                        <span>{{ area.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
                    </div>
                </div>
                <div class="area-actions">
                    <button class="simple-btn edit-btn" (click)="openEditModal(area)">
                        Sửa
                    </button>
                    <button class="simple-btn delete-btn" (click)="deleteArea(area)">
                        Xóa
                    </button>
                </div>
            </div>
            }
        </div>
        }

        <!-- Empty State -->
        @if (areas().length === 0 && !loading()) {
        <div class="simple-empty">
            <h3>Chưa có khu vực nào</h3>
            <p>Bắt đầu bằng cách thêm khu vực đầu tiên</p>
            <button (click)="openAddModal()" class="simple-add-btn">
                + Thêm khu vực
            </button>
        </div>
        }
    </div>

    <!-- Add Modal -->
    @if (showAddModal()) {
    <div class="simple-modal-overlay" (click)="closeAddModal()">
        <div class="simple-modal" (click)="$event.stopPropagation()">
            <h3>Thêm khu vực mới</h3>

            <form (ngSubmit)="addArea()">
                <div class="form-group">
                    <label>Tên khu vực *</label>
                    <input type="text" [(ngModel)]="newArea.areaName" name="areaName" placeholder="Nhập tên khu vực"
                        required>
                </div>

                <div class="form-group">
                    <label>Mô tả</label>
                    <textarea [(ngModel)]="newArea.description" name="description" rows="3"
                        placeholder="Nhập mô tả khu vực"></textarea>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" [(ngModel)]="newArea.isActive" name="isActive" id="add-active">
                    <label for="add-active">Kích hoạt khu vực</label>
                </div>

                <div class="modal-actions">
                    <button type="button" (click)="closeAddModal()" class="simple-btn cancel-btn"
                        [disabled]="loading()">
                        Hủy
                    </button>
                    <button type="submit" class="simple-btn submit-btn" [disabled]="loading()">
                        {{ loading() ? 'Đang thêm...' : 'Thêm' }}
                    </button>
                </div>
            </form>
        </div>
    </div>
    }

    <!-- Edit Modal -->
    @if (showEditModal()) {
    <div class="simple-modal-overlay" (click)="closeEditModal()">
        <div class="simple-modal" (click)="$event.stopPropagation()">
            <h3>Sửa khu vực</h3>

            <form (ngSubmit)="updateArea()">
                <div class="form-group">
                    <label>Tên khu vực *</label>
                    <input type="text" [(ngModel)]="editArea.areaName" name="areaName" placeholder="Nhập tên khu vực"
                        required>
                </div>

                <div class="form-group">
                    <label>Mô tả</label>
                    <textarea [(ngModel)]="editArea.description" name="description" rows="3"
                        placeholder="Nhập mô tả khu vực"></textarea>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" [(ngModel)]="editArea.isActive" name="isActive" id="edit-active">
                    <label for="edit-active">Kích hoạt khu vực</label>
                </div>

                <div class="modal-actions">
                    <button type="button" (click)="closeEditModal()" class="simple-btn cancel-btn"
                        [disabled]="loading()">
                        Hủy
                    </button>
                    <button type="submit" class="simple-btn submit-btn" [disabled]="loading()">
                        {{ loading() ? 'Đang cập nhật...' : 'Cập nhật' }}
                    </button>
                </div>
            </form>
        </div>
    </div>
    }
</div>